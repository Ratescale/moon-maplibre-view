<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Moon Map</title>
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <script src="https://unpkg.com/maplibre-gl@^5.0.0/dist/maplibre-gl.js"></script>
    <link
      href="https://unpkg.com/maplibre-gl@^5.0.0/dist/maplibre-gl.css"
      rel="stylesheet"
    />
    <style>
      body {
        margin: 0;
        padding: 0;
        background-color: #222;
      }
      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      const initMoonMap = () => {
        const map = new maplibregl.Map({
          container: "map",
          zoom: 1,
          center: [0, 0],
          renderWorldCopies: false,
          maxZoom: 9,
          maxPitch: 85,
          style: {
            version: 8,
            projection: { type: "globe" },
            glyphs: "https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",
            sources: {
              surface: {
                type: "raster",
                tiles: [
                  "https://trek.nasa.gov/tiles/Moon/EQ/LRO_WAC_Mosaic_Global_303ppd_v02/1.0.0//default/default028mm/{z}/{x}/{y}.jpg",
                ],
                tileSize: 256,
                attribution: `
                  USGS/NASA: 
                  <a href="https://astrogeology.usgs.gov/search/map/Moon/LRO/LROC_WAC/Lunar_LRO_LROC-WAC_Mosaic_global_100m_June2013">Surface</a> |
                  <a href="https://planetarynames.wr.usgs.gov/Page/MOON/target">Crater</a> |
                  <a href="https://pgda.gsfc.nasa.gov/products/54">DEM</a>`,
              },
              crater: {
                type: "geojson",
                data: "./cratername.geojson", // Ensure the geojson file path is correct
              },
            },
            layers: [
              {
                id: "surface",
                type: "raster",
                source: "surface",
                paint: {
                  "raster-fade-duration": 0,
                },
              },
              {
                id: "crater-labels",
                type: "symbol",
                source: "crater",
                layout: {
                  "text-field": ["get", "name"],
                  "text-font": ["Metropolis Bold"],
                  "text-size": 12,
                  "text-variable-anchor": ["top"],
                  "text-radial-offset": 0.5,
                  "text-justify": "auto",
                },
                paint: {
                  "text-color": "#FFF",
                  "text-halo-color": "#000",
                  "text-halo-width": 1,
                },
                minzoom: 5,
              },
            ],
          },
        });

        map.addControl(new maplibregl.NavigationControl());
        map.addControl(new maplibregl.FullscreenControl(), "top-right");

        map.on("load", () => {
          console.log("Moon map loaded successfully");
        });

        map.on("error", (e) => {
          console.error("Map error:", e);
        });
      };

      initMoonMap();
    </script>
  </body>
</html>
